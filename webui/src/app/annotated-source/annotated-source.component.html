<div class="layout-page col-lg-9 col-md-9 col-sm-8 col-xs-8 no-pad">
    <!-- Annotated source -->
    <div class="annotated-source-body col-lg-12 col-md-12 col-sm-12 col-xs-12 no-pad">
        <nav class="file-header col-lg-12 col-md-12 col-sm-12 col-xs-12 no-pad">
            <a [routerLink]="['/code-explorer', source.project, source.source_dir]">
                {{ source.project }}
            </a>
            <span  class="path-divider">/</span>
            <strong>{{ source.filename }}</strong>
        </nav>
        <main #scrollView class="scrollable-content col-lg-12 col-md-12 col-sm-12 col-xs-12" [ngClass]="showMessageList ? 'expanded' : 'reduce'">
            <div class="missing-file-content" *ngIf="!source.lines">
                <h4>Missing file content</h4>
                <p>
                    This is most likely due to an error during the HTML report
                    generation.
                </p>
            </div>
            <div class="file" *ngIf="source.lines">
                <annotated-source-content
                                          [lines]="source.lines"
                                          [tools]="source.tools"
                                          [coverage]="source.coverage"
                                          [inlineMessages]="inlineMessages"
                                          [displayMessages]="displayMessages">
                </annotated-source-content>
            </div>
        </main>
    </div>
    <!--    <footer class="layout-page-footer location-view col-lg-12 col-md-12 col-sm-12 col-xs-12 no-pad" *ngIf="displayMessages && inlineMessagesShownCount">-->
    <footer class="layout-page-footer location-view col-lg-12 col-md-12 col-sm-12 col-xs-12 no-pad" *ngIf="displayMessages">
        <div class="location-view-flex col-lg-12 col-md-12 col-sm-12 col-xs-12 no-pad">
            <div class="location-view-header col-lg-12 col-md-12 col-sm-12 col-xs-12 no-pad">
                <span class="location-view-title">
                    {{ inlineMessagesShownCount }} messages
                </span>
                <button class="location-view-collapse-btn"
                        [mdTooltip]="showMessageList ? 'Hide' : 'Show'"
                        mdTooltipPosition="left"
                        (click)="showMessageList = !showMessageList">
                    <md-icon class="md-18" [ngClass]="{ expanded: showMessageList }">
                        keyboard_capslock
                    </md-icon>
                </button>
            </div>
            <!--<div class="location-view-list" *ngIf="showMessageList">-->
            <div class="location-view-list col-lg-12 col-md-12 col-sm-12 col-xs-12 no-pad" [ngClass]="showMessageList ? 'expanded' : 'reduce'">
                <table class="file-line-container col-lg-12 col-md-12 col-sm-12 col-xs-12 no-pad">
                    <tbody class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-pad">
                        <template ngFor let-line [ngForOf]="source.messages | dshMapKeys">
                            <template ngFor let-message [ngForOf]="source.messages[line]">
                                <tr class="message"
                                    *ngIf="!message._ui_hidden"
                                    [ngClass]="{ selected: selectedLine == line }">
                                    <td class="message-line">{{ line }}</td>
                                    <td class="message-col">
                                        <template [ngIf]="message.begin">
                                            <template [ngIf]="message.begin === message.end">
                                                {{ message.begin }}
                                            </template>
                                            <template [ngIf]="message.begin !== message.end">
                                                {{ message.begin }}-{{ message.end }}
                                            </template>
                                        </template>
                                    </td>
                                    <td class="message-tool">{{ message.rule.tool.name }}</td>
                                    <td class="message-text">
                                        <a [routerLink]="['.', { line: line }]">
                                            {{ message.text }}
                                        </a>
                                    </td>
                                </tr>
                            </template>
                        </template>
                    </tbody>
                </table>
            </div>
        </div>
    </footer>
</div>
